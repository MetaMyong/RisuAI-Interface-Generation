<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RisuAI 봇 제작 보조 도구</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbit&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

	<div class="header-container">
        <h1 class="main-logo">RisuAI 봇 제작 보조 도구</h1>
        <a href="#" id="version-link">v1.0.2</a>
    </div>

    <div class="container">
        <!-- 탭 버튼 영역 -->
        <div class="tabs">
            <button class="tab-btn active-tab" onclick="showTab('character-sheet-tab')">캐릭터 시트</button>
            <button class="tab-btn" onclick="showTab('editor-ai-tab')">인터페이스 편집기</button>
			<button class="tab-btn" onclick="showTab('lore-generator-tab')">출력 지침 생성기</button>
            <button class="tab-btn" onclick="showTab('settings-tab')">설정</button>
        </div>

        <!-- 탭 콘텐츠 영역 -->
        <div class="tab-content">
			
            <!-- 탭 2: 캐릭터 시트 -->
            <div id="character-sheet-tab" class="tab-pane active-pane">
                <div class="card">
                    <h2>캐릭터 설정 입력</h2>
                    <div class="input-group">
                        <label for="character-prompt">캐릭터의 이름, 외형, 성격, 말투 등을 자유롭게 서술해주세요.</label>
                        <textarea id="character-prompt" placeholder="예: 이름은 '루나'. 은발에 푸른 눈을 가진 차분하고 신비로운 소녀. 사용자에게 항상 존댓말을 사용한다."></textarea>
                    </div>
                    <button id="character-generate-btn">캐릭터 시트 생성 (한/영)</button>
                </div>

                <div class="card">
                    <h2>생성 결과 미리보기</h2>
                    <div id="character-sheet-preview">
                        <div class="korean-output">
                            <h3>한국어</h3>
                            <div class="output-content" id="korean-output-content">생성 버튼을 눌러주세요.</div>
                        </div>
                        <div class="english-output">
                            <h3>English</h3>
                            <div class="output-content" id="english-output-content">Please press the generate button.</div>
                        </div>
                    </div>
                </div>
            </div>
						
            <!-- 탭 2: 인터페이스 편집기 -->
            <div id="editor-ai-tab" class="tab-pane active-pane">
                <!-- 상단: 미리보기 결과 영역 -->
                <div class="card preview-card">
                    <h2>미리보기 결과</h2>
                    <div id="preview-output"></div>

                    <div class="asset-upload-area">
                        <span class="upload-title">예시 이미지 업로드:</span>
                        <div class="upload-item">
                            <label for="user-upload" class="asset-upload-label">user</label>
                            <input type="file" id="user-upload" class="asset-upload-input" accept="image/*">
                            <span id="user-upload-status" class="upload-status"></span>
                        </div>
                        <div class="upload-item">
                            <label for="char-upload" class="asset-upload-label">char</label>
                            <input type="file" id="char-upload" class="asset-upload-input" accept="image/*">
                            <span id="char-upload-status" class="upload-status"></span>
                        </div>
                        <div class="upload-item">
                            <label for="asset-upload" class="asset-upload-label">asset</label>
                            <input type="file" id="asset-upload" class="asset-upload-input" accept="image/*">
                            <span id="asset-upload-status" class="upload-status"></span>
                        </div>
                    </div>
                    <button id="process-btn" class="preview-btn">미리보기 수동 생성</button>
                </div>

                <!-- 하단: 입력 패널 컨테이너 -->
                <div class="panels-container">
                    <!-- 왼쪽 패널: 수동 입력 -->
                    <div class="card">
                        <h2>입력</h2>
                        <div class="input-group">
                            <div class="label-with-button">
                                <label for="regex-in">정규식 IN</label>
                                <button id="debug-regex-btn" class="debug-btn">디버그</button>
                            </div>
                            <textarea id="regex-in" placeholder="[Time:(.*?)]"></textarea>
                            <div id="regex-debug-output"></div>
                        </div>
                        <div class="input-group">
                            <label for="replace-out">Replace OUT (HTML/CSS 템플릿)</label>
                            <textarea id="replace-out" placeholder="<div class='clock'>$1</div>"></textarea>
                        </div>
                        <div class="input-group">
                            <label for="sample-text">예시 문구</label>
                            <textarea id="sample-text" placeholder="[Time: 12:34:56]"></textarea>
                        </div>
                    </div>

                    <!-- 오른쪽 패널: AI 생성기 -->
                    <div class="card">
                        <h2>AI 생성기</h2>
                        <div class="input-group">
                            <label for="image-upload">이미지 첨부 (선택 사항)</label>
                            <input type="file" id="image-upload" accept="image/*">
                            <div id="image-preview"></div>
                        </div>
                        <div class="input-group">
                            <label for="ai-prompt">AI 요청 프롬프트</label>
                            <textarea id="ai-prompt" placeholder="예: 유튜브 채팅창 스타일의 세련된 시계 상태창을 만들어줘. 시간은 [Time: HH:mm:ss] 형태로 표시될거야."></textarea>
                        </div>
                        <button id="ai-generate-btn">AI에게 요청</button>
                        <button id="reset-chat-btn" class="secondary">대화 이력 초기화</button>
                        <hr>
                        <h3>AI 작업 로그</h3>
                        <div id="ai-log">AI 요청 상태 및 결과가 여기에 표시됩니다.</div>
                    </div>
                </div>
            </div>
			
            <!-- 탭 3: 출력 지침 생성기 -->
			<div id="lore-generator-tab" class="tab-pane">
				<div class="card">
					<h2>출력 지침 생성 조건 입력</h2>
					<div class="input-group">
						<label for="lore-prompt">사용 중인 정규식(IN)과 만들고 싶은 지침의 목적을 자유롭게 서술해주세요.</label>
						<textarea id="lore-prompt" placeholder="예시:정규식 [Time:(.*?)][Name:(.*?)]을 사용하는, 게임 속 NPC의 대사를 출력하는 지침을 만들어줘. 시간, 이름, 대사 내용이 포함되어야 해."></textarea>
					</div>
					<button id="lore-generate-btn">AI에게 출력 지침 생성 요청</button>
				</div>
				<div class="card">
					<h2>생성된 지침 (한/영)</h2>
					<div id="lore-generator-preview">
						<div class="korean-output">
							<h3>한국어</h3>
							<div class="output-content" id="korean-lore-output-content">생성 버튼을 눌러주세요.</div>
						</div>
						<div class="english-output">
							<h3>English</h3>
							<div class="output-content" id="english-lore-output-content">Please press the generate button.</div>
						</div>
					</div>
				</div>
			</div>

            <!-- 탭 4: 설정 -->
            <div id="settings-tab" class="tab-pane">
                <div class="card">
                    <h2>모델 설정</h2>
                    <div class="input-group">
						<label for="model-select">모델 선택</label>
						<select id="model-select" class="settings-select">
							<option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
							<option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
						</select>
					</div>
					<div class="input-group">
						<label for="api-key-input">Gemini API 키</label>
						<input type="password" id="api-key-input" placeholder="여기에 API 키를 붙여넣으세요">
					</div>
					<div class="input-group checkbox-group">
						<input type="checkbox" id="prefill-option-checkbox">
						<label for="prefill-option-checkbox">프리필 옵션</label>
						<p class="note">AI가 대화의 맥락을 더 잘 이해하도록 돕는 옵션입니다.</p>
					</div>
					<p class="note">API 키와 설정은 브라우저에만 저장됩니다.</p>
				</div>
            </div>

        </div>
    </div>

    <footer class="footer">
        <p>
            <a href="https://github.com/MetaMyong/RisuAI-Interface-Generation" target="_blank">GitHub Repository</a> | Licensed under MIT
        </p>
    </footer>
    
    <div id="changelog-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close-btn">&times;</span>
            <h2>변경 내역 (Changelog)</h2>
            <div id="changelog-content">
                <p>로딩 중...</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>