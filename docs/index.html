<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RisuAI 봇 제작 보조 도구</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

    <div class="header-container">
        <a href="#" id="version-link">v1.0.1</a>
    </div>

    <div class="container">
        <!-- 탭 버튼 영역 -->
        <div class="tabs">
            <button class="tab-btn active-tab" onclick="showTab('editor-ai-tab')">인터페이스 편집기</button>
            <button class="tab-btn" onclick="showTab('settings-tab')">설정</button>
        </div>

        <!-- 탭 콘텐츠 영역 -->
        <div class="tab-content">

            <!-- 탭 1: 인터페이스 편집기 -->
            <div id="editor-ai-tab" class="tab-pane active-pane">
                <!-- 상단: 미리보기 결과 영역 -->
                <div class="card preview-card">
                    <h2>미리보기 결과</h2>
                    <div id="preview-output"></div>

                    <div class="asset-upload-area">
                        <span class="upload-title">예시 이미지 업로드:</span>
                        <div class="upload-item">
                            <label for="user-upload" class="asset-upload-label">user</label>
                            <input type="file" id="user-upload" class="asset-upload-input" accept="image/*">
                            <span id="user-upload-status" class="upload-status"></span>
                        </div>
                        <div class="upload-item">
                            <label for="char-upload" class="asset-upload-label">char</label>
                            <input type="file" id="char-upload" class="asset-upload-input" accept="image/*">
                            <span id="char-upload-status" class="upload-status"></span>
                        </div>
                        <div class="upload-item">
                            <label for="asset-upload" class="asset-upload-label">asset</label>
                            <input type="file" id="asset-upload" class="asset-upload-input" accept="image/*">
                            <span id="asset-upload-status" class="upload-status"></span>
                        </div>
                    </div>
                    <button id="process-btn" class="preview-btn">미리보기 수동 생성</button>
                </div>

                <!-- 하단: 입력 패널 컨테이너 -->
                <div class="panels-container">
                    <!-- 왼쪽 패널: 수동 입력 -->
                    <div class="card">
                        <h2>입력</h2>
                        <div class="input-group">
                            <div class="label-with-button">
                                <label for="regex-in">정규식 IN</label>
                                <button id="debug-regex-btn" class="debug-btn">디버그</button>
                            </div>
                            <textarea id="regex-in" placeholder="[Time:(.*?)]"></textarea>
                            <div id="regex-debug-output"></div>
                        </div>
                        <div class="input-group">
                            <label for="replace-out">Replace OUT (HTML/CSS 템플릿)</label>
                            <textarea id="replace-out" placeholder="<div class='clock'>$1</div>"></textarea>
                        </div>
                        <div class="input-group">
                            <label for="sample-text">예시 문구</label>
                            <textarea id="sample-text" placeholder="[Time: 12:34:56]"></textarea>
                        </div>
                    </div>

                    <!-- 오른쪽 패널: AI 생성기 -->
                    <div class="card">
                        <h2>AI 생성기</h2>
                        <div class="input-group">
                            <label for="image-upload">이미지 첨부 (선택 사항)</label>
                            <input type="file" id="image-upload" accept="image/*">
                            <div id="image-preview"></div>
                        </div>
                        <div class="input-group">
                            <label for="ai-prompt">AI 요청 프롬프트</label>
                            <textarea id="ai-prompt" placeholder="예: 유튜브 채팅창 스타일의 세련된 시계 상태창을 만들어줘. 시간은 [Time: HH:mm:ss] 형태로 표시될거야."></textarea>
                        </div>
                        <button id="ai-generate-btn">AI에게 요청</button>
                        <button id="reset-chat-btn" class="secondary">대화 이력 초기화</button>
                        <hr>
                        <h3>AI 작업 로그</h3>
                        <div id="ai-log">AI 요청 상태 및 결과가 여기에 표시됩니다.</div>
                    </div>
                </div>
            </div>

            <!-- 탭 2: 설정 -->
            <div id="settings-tab" class="tab-pane">
                <div class="card">
                    <h2>API 설정</h2>
                    <div class="input-group">
                        <label for="api-key-input">Gemini API 키</label>
                        <input type="password" id="api-key-input" placeholder="여기에 API 키를 붙여넣으세요">
                        <p class="note">API 키는 브라우저에만 저장됩니다.</p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <footer class="footer">
        <p>
            <a href="https://github.com/MetaMyong/RisuAI-Interface-Generation" target="_blank">GitHub Repository</a> | Licensed under MIT
        </p>
    </footer>
    
    <div id="changelog-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close-btn">&times;</span>
            <h2>변경 내역 (Changelog)</h2>
            <div id="changelog-content">
                <p>로딩 중...</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>